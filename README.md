# yii3-ar2

## Ключевые моменты

- PHP 8.1+
- Базируется на [cycle/database](https://github.com/cycle/database) или [doctrine/dbal](https://github.com/doctrine/dbal).
- Не наследует лишнего с Yii2 AR, а берёт лучшее с Laravel, Yii2, Yii3.
- Поддерживает ленивую загрузку черех коллекцию, а так же на уровне одной модели без испорльзования прокси.
- Поддерживает обновление атрибутов без загрузки модели.
- Аттрибуты строго типизированы.
- Магические аттрибуты фиксированны и не связаны именами с полями в базе.
- Концепт сценариев из Yii2 остаётся.
  - Сценарии определяют какие свойства можно массово присваивать.
- Поддержка курсоров как в Laravel.
- Возврат состояния модели при неуспешном завершении транзакции (пока на уровне идеи).
- Использование новых PhpStorm/Psalm совместимых аннотаций.
- Жадная загрузка связей для массива оъектов и коллекции.
- Частичная загрузка атрибутов с защитой от чтения незагруженных атрибутов.
- Преобразование условий where в объекты во время добавления (позволит получить экцепшен при ошибке сразу, а не потом).
- Полная поддержка всех фишек Yii3.
- Поддержка ENUM и SET.
- Генератор который позволит кастомизировать и менять генерируемый код.
- Генератор с удобным гибким генератором связей.
- Генератор будет генерировать статические методы модели типа getById(), getByName() (опционально).
- Генератор будет генерировать методы запроса типа byId(), byName() (опционально).

## Подробное описание

### Сущности

- Модель (ActiveRecordInterface)
- Менеджер моделей (ActiveRecordManagerInterface)
- Коллекция (ActiveCollectionInterface) - Что то типа ActiveDataProvider в Yii2
- Связь (много типов)

#### Модель

##### Функционал

#### Менеджер моделей

##### Функционал

#### Коллекция

##### Функционал

#### Связь

##### Функционал
